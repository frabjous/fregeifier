<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="author" content="Kevin C. Klement" />
    <meta name="robots" content="noindex,nofollow" />
    <meta property="og:title" content="README" />
    <title>README</title>
    <style>
html {
line-height: 1.5;
font-family: 'Libertinus Serif', serif;
font-size: 18px;
}
body {
margin: 0 auto;
max-width: 36em;
text-align: justify;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
h1, h2, h3, h4 {
text-align: left;
page-break-after: avoid;
}
.fregeify svg {
transform: scale(1);
}
div.fregeify {
text-align: center;
}
span.fregeify.middle {
display: inline-block;
vertical-align: middle;
}
span.fregeify.top {
display: inline-block;
vertical-align: text-top;
}
@media print {
body {
background-color: transparent;
color: black;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h1, h2, h3, h4 {
text-align: left;
page-break-after: avoid;
}
span.citation a:link,
span.citation a:visited,
span.citation a {
color: inherit;
text-decoration: none;
}
a.footnote-back {
display: none !important;
}
}
p {
margin: 1em 0;
}
img {
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
h1 span.header-section-number::after {
content: ".";
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 1.5em 1em 1.5em;
padding-left: 1em;
}
#footnotes hr {
display: none;
}
#footnotes {
margin-top: 2.4em;
}
#footnotes::before {
content: "Notes";
font-size: 2em;
font-weight: bold;
margin-block-start: 0.67em;
margin-block-end: 0.67em;
}
#footnotes ul, #footnotes ol {
margin-top: 10px;
}
code {
font-family: 'DejaVu Sans Code', 'DejaVu Sans Mono', 'Droid Sans Mono', 'Fira Code', 'Fira Mono', 'JetBrains Mono', Inconsolata, Cousine, 'IBM Plex Mono', 'Red Hat Mono', 'Sarasa Mono K', 'Ubuntu Mono', Consolas, Menlo, Monaco, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
white-space: pre-wrap;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
sup {
white-space: nowrap;
line-height: 0;
font-size: 75%;
position: relative;
vertical-align: baseline;
top: -0.5em;
}
sub {
white-space: nowrap;
line-height: 0;
font-size: 75%;
position: relative;
vertical-align: baseline;
top: 0.3em;
line-height: 0;
}
span.smallcaps{
font-variant: small-caps;
}
span.underline {
text-decoration: underline;
}
div.column{
display: inline-block;
vertical-align: top;
width: 50%;
}

div.csl-entry {
margin-left: 1.5em;
text-indent: -1.5em;
}
ul.task-list{
list-style: none;
}
.pagebreak {
page-break-after: always;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
.display.math{
display: block;
text-align: center;
margin: 0.5rem auto;
}
@page {
size: Letter;
margin: 1in;
counter-increment: page;
@bottom-center {
content: counter(page);
}
}
@page:first {
@bottom-center {
content: none;
}
} </style>
</head>
<body>
<h1 id="the-amazing-fregeifier">The Amazing Fregeifier</h1>
<h2 id="introduction">Introduction</h2>
<p>The Fregeifier is a collection of tools for rendering unusual
mathematics in documents and webpages, including things such Gottlob
Frege’s logical notation or that of Russell and Whitehead’s
<em>Principia Mathematica</em>.</p>
<p>It is currently early in development. What has been finished so far
is an early version of a filter for <a href="https://pandoc.org">pandoc</a> that allow only a selected subset
of LaTeX-coded mathematics in a markdown document, when converted to
HTML or an HTML-based format, to be rendered as images created by
converting the output of processing the mathematics by means of a LaTeX
engine. See the <a href="#roadmap-and-todo">roadmap</a> below for
additional planned features.</p>
<p>The name of the project, and its initial use case, involved easy
inclusion of Gottlob Frege’s logical notation making use of the existing
LaTeX tooling in non-LaTeX based documents. However, the Fregeifier is
not limited to Frege notation, but can be used for any complex math
environments for which LaTeX tools exist but cannot be currently handled
by pandoc by itself.</p>
<p>It was originally developed for <a href="https://jhaponline.org">The
Journal for the History of Analytical Philosophy</a> and integrates
easily with the <a href="https://github.com/frabjous/open-guide-typesetting-framework">Open
Guide Typesetting Framework</a> and <a href="https://github.com/frabjous/open-guide-typesetting-framework">Open
Guide Editor</a> it uses, which I also created, though it may be used
independently.</p>
<h2 id="requirements">Requirements</h2>
<p>The Fregeifier has only been tested on linux, but may work on other
unix-like environments.</p>
<p>The Fregeifier requires <a href="https://www.php.net/">php</a>, a TeX
distribution such as <a href="https://tug.org/texlive/">texlive</a>, the
<a href="https://www.mankier.com/1/mutool">mutool</a> program from the
MuPDF project, and of course <a href="https://pandoc.org">pandoc</a> to
use the pandoc filter.</p>
<h2 id="installation">Installation</h2>
<p>Clone this repository to a directory of your choosing (here
<code>/path/to/repos</code>):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /path/to/repos</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--depth</span> 1 https://github.com/frabjous/fregeifier</span></code></pre></div>
<p>If permissions were not preserved in the cloning, you will need to
make the pandoc filter executable:</p>
<pre class="ah"><code>chmod a+x /path/to/repos/fregeifier/fregeifier_pandoc_filter.php</code></pre>
<h2 id="using-the-pandoc-filter">Using the pandoc filter</h2>
<p>For background, see pandoc’s documentation on <a href="https://pandoc.org/filters.html">(json) filters</a>.</p>
<p>The filter can be called using the <code>--filter</code> command line
option to pandoc, e.g.:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--filter</span> /path/to/repos/fregeifier/fregeifier_pandoc_filter.php <span class="dt">\</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    mydocument.md <span class="at">-o</span> mydocument.html</span></code></pre></div>
<p>The output format of the images will either be svg or that specified
as the <code>--default-image-extension</code> option passed to pandoc.
For png images, one can do:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">--filter</span> /path/to/repos/fregeifier/fregeifier_pandoc_filter.php <span class="dt">\</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">--default-image-extension</span><span class="op">=</span>png mydocument.md <span class="at">-o</span> mydocument.html</span></code></pre></div>
<p>Currently only <code>svg</code> and <code>png</code> are supported,
but this may change.</p>
<p>For the filter to have any effect when applied to a markdown input
document, parts of the document containing either inline or
block/display mathematics must be given the <code>.fregeify</code> css
class, e.g.:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Here is some inline math, like <span class="co">[</span><span class="ot">$2 + 2 = 4$</span><span class="co">]</span>{.fregeify},</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>with the class applied</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>Below is some display math with the class applied.</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>:::{.fregeify}</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>5 + 7 = 12</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>:::</span></code></pre></div>
<p>These math environments will be processed by LaTeX, converted to
small images, and inserted into the document at the specified places.
Mathematics environments not so marked with the <code>.fregeify</code>
class should be unaffected.</p>
<p>Most likely, however, you don’t need to use this on boring math like
“5 + 7 = 12” which can easily be rendered as regular text. The main use
of the filter is to be able to call upon commands from unusual LaTeX
packages. The filter will look for pandoc-compliant (yaml) metadata in
the document containing code to include additional LaTeX packages in the
header, which typically takes the following form:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span><span class="co"> |</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">    \usepackage{grundgesetze,fge}</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">...</span></span></code></pre></div>
<p>These packages will be available then not just if the markdown
document is processed to PDF by a LaTeX engine, but also when the filter
creates the small images.</p>
<p>So a small complete document might look like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span><span class="co"> |</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">    \usepackage{grundgesetze,fge}</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">...</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>In Frege’s notation, a conditional is written as so:</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>:::{.fregeify}</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>\GGjudge\GGconditional{p}{q}</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>:::</span></code></pre></div>
<p>Here the <a href="https://ctan.org/pkg/grundgesetze?lang=en">LaTeX
grundgesetze package</a> is used to render Frege’s notation. Again,
however, the filter is package-agnostic and may be used with any LaTeX
packages, not just those for Frege’s notation.</p>
<p>A custom template can be used to always load certain packages for a
local installation. See <a href="#custom-templates">below</a>.</p>
<h2 id="how-it-works">How it works</h2>
<p>The LaTeX math code extracted from the environment by pandoc is
processed by the filter to create a minimal LaTeX document. That
document is then processed by LaTeX into PDF, the PDF is cropped by the
<code>pdfcrop</code> utility of TeXlive, and then <code>mutool</code> is
used to convert the PDF page to the output format. The images will be
placed in an <code>images</code> subfolder of the active directory. It
is usually best to run pandoc from the same directory as your source
document.</p>
<h2 id="custom-templates">Custom templates</h2>
<p>By default, the minimal LaTeX documents are based on the file
<code>default-template.tex</code>. However, the contents of these
minimal documents can be modified by using a different template.</p>
<p>Custom templates will be searched for in the following order.</p>
<ol type="1">
<li>The path set by environmental variable
<code>FREGEIFIER_TEMPLATE</code> if non-empty.</li>
<li>The current directory using the filename
<code>fregeifier-template.tex</code>.</li>
<li><code>$HOME/.config/fregeifier/fregeifier-template.tex</code>.</li>
</ol>
<p>If none of these are found, the default is used.</p>
<p>The template may also be used to change the LaTeX engine used. If the
template contains (most likely in a comment), <code>xelatex</code> or
<code>lualatex</code>, they will be used instead to create the
intermediate PDFs; otherwise <code>pdflatex</code> is used.</p>
<p>Templates must also contain comments of the following forms:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">% FREGEIFIER:HEADERINCLUDES</span></span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">% FREGEIFIER:MATHTEXT</span></span></code></pre></div>
<p>When processing a “fregeified” math environment, the former will be
replaced by any TeX-specific <code>header-includes:</code> content, and
the latter by the LaTeX code used in the math fragment.</p>
<p>There must be exactly one space between the <code>%</code> and the
words in the template.</p>
<p>The file <code>default-template.tex</code> can be consulted for
comparison, and/or directly copied and modified.</p>
<h2 id="roadmap-and-todo">Roadmap and TODO</h2>
<p>Eventually, the Fregeifier should offer more than just a pandoc
filter.</p>
<p>It should also make it easy to use to create images compatible with
other file formats, such as <code>.docx</code>, <code>.odt</code> and
similar.</p>
<p>Eventually, I hope to create a web interface for download such
images, and a mechanism for inserting complex or unusual mathematics
into webpages just with a url, or some javascript insertion. This should
supplement tools such as MathJax or KaTeX but be able to handle all
possible LaTeX code, not just what is supported by more limited
tools.</p>
<h2 id="license">License</h2>
<p>Copyright 2024 © <a href="https://people.umass.edu/klement">Kevin C.
Klement</a>. This is free software, which can be redistributed and/or
modified under the terms of the <a href="https://www.gnu.org/licenses/gpl.html">GNU General Public License
(GPL), version 3</a>.</p>
<p>A big thank you to John MacFarlane and the other pandoc
developers.</p>
</body>
</html>
